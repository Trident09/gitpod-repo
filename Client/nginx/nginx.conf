server {
    listen       80;
    server_name  localhost;

    # location for the root path
    location / {
        root   /usr/share/nginx/html;  # The build directory where React app is stored
        index  index.html index.htm;
        try_files $uri $uri/ /index.html;  # Serve index.html for unmatched routes for React Router
    }

    # Error handling for 404 and 50x errors
    error_page   404              /index.html;
    error_page   500 502 503 504  /50x.html;
    location = /50x.html {
        root   /usr/share/nginx/html;
    }
    
    # Disable logging for favicon
    location = /favicon.ico {
        log_not_found off;
        access_log off;
    }

    # Disable logging for robots.txt
    location = /robots.txt {
        allow all;
        log_not_found off;
        access_log off;
    }

    # Enable Gzip compression
    gzip on;
    gzip_comp_level    5;
    gzip_min_length    256;
    gzip_proxied       any;
    gzip_vary          on;

    gzip_types
        text/css
        text/javascript
        application/javascript
        application/x-javascript
        application/json
        application/xml
        application/vnd.ms-fontobject
        application/x-font-ttf
        application/x-font-opentype
        application/x-font-truetype
        image/svg+xml
        image/x-icon
        text/plain
        text/x-component
        font/ttf
        font/otf
        font/truetype;

    # Correctly set the Content-Type for WebAssembly files
    types {
        application/wasm  wasm;
    }

    # Max upload size
    client_max_body_size 75M;  # Adjust this value according to your requirements

    # Static file caching
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
        expires 1y;
        add_header Cache-Control "public, no-transform";
    }
}